(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}})();async function f(o){try{return await(await fetch(o)).json()}catch(t){console.error(t)}}function g(o){const t=document.createElement("div");t.classList.add("dog-card");const n=document.createElement("img");n.alt=o.dogName;const i=new Image;let e=document.createElement("p");e.textContent="Leider kein Bild vorhanden!",e.style.display="none",t.appendChild(e),i.onerror=function(){console.log("error"),n.style.display="none",e.style.display="block"},i.onload=function(){n.style.display="block",e.style.display="none",n.src=o.image},i.src=o.image;const s=document.createElement("h2");s.textContent=o.dogName,s.id=o.dogName;const a=document.createElement("button");return a.classList.add("add-to-favorites"),a.textContent="Zu Favoriten hinzufügen",a.disabled=!0,t.appendChild(n),t.appendChild(s),t.appendChild(a),t}async function p(o){const t=document.getElementById("apiDataContainer");if(t)for(const n in o){const i=await f("https://dog.ceo/api/breed/"+n+"/images/random"),e={dogName:n,image:i.message},s=g(e);t.appendChild(s)}}function d(o,t){o&&(t?(o.textContent="Als Favorit entfernen",o.style.backgroundColor="#c00"):(o.textContent="Zu Favoriten hinzufügen",o.style.backgroundColor="#3498db"))}function y(){const o=document.getElementById("favoritesContainer");if(o){const t=document.createElement("ul");t.classList.add("favorites-list");const n=JSON.parse(localStorage.getItem("favorites"))||"[]";for(const i of n){const e=document.createElement("li");e.textContent=i,e.classList.add("favorite-item"),t.appendChild(e)}o.appendChild(t)}}window.addEventListener("load",()=>{const o=document.getElementById("loading-icon");o&&(o.style.display="block")});function l(o,t=!0){const n=document.getElementById("notification");n&&(n.textContent=o,n.style.backgroundColor=t?"#4CAF50":"#ff0000",n.style.display="block",setTimeout(()=>{n.style.display="none"},3e3))}async function h(){console.log("TEST");const o=await f("https://dog.ceo/api/breeds/list/all");await p(o.message);const t=document.getElementById("loading-icon");t&&(t.style.display="none");const n=document.getElementsByClassName("add-to-favorites");for(const i of n){i.disabled=!1;const e=JSON.parse(localStorage.getItem("favorites"))||[],a=i.closest(".dog-card").querySelector("h2");if(a){const r=a.id;e.includes(r)&&d(i,!0)}}if(n)for(const i of n)i.addEventListener("click",e=>{const s=e.target.closest(".dog-card");if(s){const a=s.querySelector("h2");if(a){const r=a.id,c=JSON.parse(localStorage.getItem("favorites"))||[];if(!c.includes(r))c.push(r),c.sort(),localStorage.setItem("favorites",JSON.stringify(c)),l(r+" wurde zu Favoriten hinzugefügt",!0),d(i,!0);else{const u=c.filter(m=>m!==r);localStorage.setItem("favorites",JSON.stringify(u)),l(r+" wurde aus Favoriten entfernt",!1),d(i,!1)}}}})}document.addEventListener("DOMContentLoaded",()=>{h(),y()});
